webpackJsonp([10],{366:function(t,e,n){var o=n(222)(n(459),n(498),null,null,null);t.exports=o.exports},382:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},383:function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},384:function(t,e,n){t.exports=!n(382)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},385:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},386:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},388:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},389:function(t,e,n){var o=n(400);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},390:function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},391:function(t,e,n){var o=n(389),r=n(388);t.exports=function(t){return o(r(t))}},392:function(t,e,n){t.exports={default:n(396),__esModule:!0}},393:function(t,e,n){var o=n(385),r=n(383),i=n(401),a=n(405),s=function(t,e,n){var c,u,l,f=t&s.F,p=t&s.G,d=t&s.S,m=t&s.P,h=t&s.B,v=t&s.W,g=p?r:r[e]||(r[e]={}),_=g.prototype,b=p?o:d?o[e]:(o[e]||{}).prototype;p&&(n=e);for(c in n)(u=!f&&b&&void 0!==b[c])&&c in g||(l=u?b[c]:n[c],g[c]=p&&"function"!=typeof b[c]?n[c]:h&&u?i(l,o):v&&b[c]==l?function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):m&&"function"==typeof l?i(Function.call,l):l,m&&((g.virtual||(g.virtual={}))[c]=l,t&s.R&&_&&!_[c]&&a(_,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},394:function(t,e,n){var o=n(410),r=n(403);t.exports=Object.keys||function(t){return o(t,r)}},395:function(t,e,n){var o=n(388);t.exports=function(t){return Object(o(t))}},396:function(t,e,n){n(419),t.exports=n(383).Object.assign},397:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},398:function(t,e,n){var o=n(386);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},399:function(t,e,n){var o=n(391),r=n(416),i=n(415);t.exports=function(t){return function(e,n,a){var s,c=o(e),u=r(c.length),l=i(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},400:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},401:function(t,e,n){var o=n(397);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},402:function(t,e,n){var o=n(386),r=n(385).document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},403:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},404:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},405:function(t,e,n){var o=n(408),r=n(412);t.exports=n(384)?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},406:function(t,e,n){t.exports=!n(384)&&!n(382)(function(){return 7!=Object.defineProperty(n(402)("div"),"a",{get:function(){return 7}}).a})},407:function(t,e,n){"use strict";var o=n(394),r=n(409),i=n(411),a=n(395),s=n(389),c=Object.assign;t.exports=!c||n(382)(function(){var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=o})?function(t,e){for(var n=a(t),c=arguments.length,u=1,l=r.f,f=i.f;c>u;)for(var p,d=s(arguments[u++]),m=l?o(d).concat(l(d)):o(d),h=m.length,v=0;h>v;)f.call(d,p=m[v++])&&(n[p]=d[p]);return n}:c},408:function(t,e,n){var o=n(398),r=n(406),i=n(417),a=Object.defineProperty;e.f=n(384)?Object.defineProperty:function(t,e,n){if(o(t),e=i(e,!0),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},409:function(t,e){e.f=Object.getOwnPropertySymbols},410:function(t,e,n){var o=n(404),r=n(391),i=n(399)(!1),a=n(413)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),c=0,u=[];for(n in s)n!=a&&o(s,n)&&u.push(n);for(;e.length>c;)o(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},411:function(t,e){e.f={}.propertyIsEnumerable},412:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},413:function(t,e,n){var o=n(414)("keys"),r=n(418);t.exports=function(t){return o[t]||(o[t]=r(t))}},414:function(t,e,n){var o=n(385),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},415:function(t,e,n){var o=n(390),r=Math.max,i=Math.min;t.exports=function(t,e){return t=o(t),t<0?r(t+e,0):i(t,e)}},416:function(t,e,n){var o=n(390),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},417:function(t,e,n){var o=n(386);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},418:function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},419:function(t,e,n){var o=n(393);o(o.S+o.F,"Object",{assign:n(407)})},459:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(392),r=n.n(o),i=n(49);n.n(i);e.default={mounted:function(){this.storageRef=this.$firebase.storage().ref(),this.$bindAsArray("campaigns",this.$database.ref("campaigns")),this.$store.state.user&&this.$store.state.user.data&&"Admin"!==this.$store.state.user.data.type&&this.$router.push("/login")},computed:{$user:function(){return this.$store.state.user},mapStores:function(){return this.$lodash.map(this.stores,function(t){return t.address=t.region+", "+t.province+", "+t.citymun+", "+t.brgy,t})},filteredCampaigns:function(){var t=this;return this.campaigns.filter(function(e){return-1!==e.promo.toLowerCase().indexOf(t.search.toLowerCase())||-1!==e.desc.toLowerCase().indexOf(t.search.toLowerCase())})}},data:function(){return{storageRef:null,uploadedPhoto:null,isNew:!0,search:"",campaigns:[],campaign:{period:{from:"",to:""},promo:"",desc:"",photo:""},page:1}},methods:{fnExcelReport2:function(){var t=document.getElementById("table_wrapper"),e=t.outerHTML.replace(/ /g,"%20"),n=document.createElement("a");n.href="data:application/vnd.ms-excel, "+e,n.download="Campaign"+Math.floor(9999999*Math.random()+1e6)+".xls",n.click()},photoAdded:function(t){this.uploadedPhoto=t[0]},photoRemoved:function(){this.uploadedPhoto=null},deleteCampaign:function(t){console.log(t);var e=this;i.Dialog.create({title:"Warning",message:"Are you sure you want to delete "+t.promo+"?",buttons:["No",{label:"Yes",handler:function(n,o){e.$firebaseRefs.campaigns.child(t[".key"]).remove()}}]})},showItem:function(t){var e=r()({},t);console.log(t),this.campaign=e,this.$refs.newModal.open()},saveNew:function(){var t=this,e=r()({},this.campaign);delete e[".key"],i.Loading.show(),console.log(this.uploadedPhoto);var n=this.storageRef.child("campaigns/"+this.campaign.promo+this.campaign.period.from+this.campaign.period.to).put(this.uploadedPhoto);n.then(function(n){console.log("PHOTO",n);var o=n.downloadURL;t.campaign.photo=o,console.log("campaign.photo",t.campaign.photo),setTimeout(function(){t.$firebaseRefs.campaigns.push(t.campaign).then(function(){i.Loading.hide(),t.campaign={period:{from:"",to:""},promo:"",desc:"",photo:""},t.$refs.newModal.close(),i.Toast.create.positive({html:e.promo+" created"})}).catch(function(t){i.Loading.hide(),i.Toast.create.negative({html:t.code+": "+t.message})})},750)}),n.on("state_changed",function(){},function(t){i.Loading.hide(),i.Toast.create.negative({html:t.code+": "+t.message})})},saveUpdate:function(){var t=this,e=r()({},this.store),n=e[".key"];delete e[".key"],delete e.address,this.$firebaseRefs.campaigns.child(n).update(e).then(function(){i.Loading.hide(),t.$refs.newModal.close(),i.Toast.create.positive({html:e.name+" | "+e.owner+" created"})}).catch(function(t){i.Loading.hide(),i.Toast.create.negative({html:t.code+": "+t.message})})}}}},498:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolbar primary",attrs:{slot:"header"},slot:"header"},[n("q-toolbar-title",{staticClass:"row full-width flex",attrs:{padding:0}},[n("div",{staticClass:"row full-width flex"},[n("span",{staticClass:"auto",staticStyle:{padding:"8px 16px 0px 0px"}},[t._v("Campaigns")]),t._v(" "),n("q-search",{staticClass:"primary float-right",staticStyle:{"max-width":"320px"},attrs:{model:t.search},on:{"update:model":function(e){t.search=e}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])],1),t._v(" "),n("div",{staticClass:"layout-padding"},[n("table",{staticClass:"q-table bordered highlight striped-odd loose full-width responsive"},[t._m(0),t._v(" "),n("tbody",t._l(t.filteredCampaigns,function(e){return n("tr",{key:e[".key"],on:{click:function(e){t.isNew=!1}}},[n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(t.$moment(e.period.from).format("MMM DD, YYYY"))),n("br"),t._v("- "+t._s(t.$moment(e.period.to).format("MMM DD, YYYY")))]),t._v(" "),n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(e.promo))]),t._v(" "),n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(e.desc))]),t._v(" "),n("td",{staticClass:"text-right"},[n("button",{staticClass:"circular small text-negative",on:{click:function(n){t.deleteCampaign(e)}}},[n("i",[t._v("delete")])])])])})),t._v(" "),t._m(1)]),t._v(" "),n("table",{staticClass:"q-table bordered highlight striped-odd loose full-width responsive visible: hidden",attrs:{border:"1",id:"table_wrapper"}},[t._m(2),t._v(" "),n("tbody",t._l(t.filteredCampaigns,function(e){return n("tr",{key:e[".key"],on:{click:function(e){t.isNew=!1}}},[n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(t.$moment(e.period.from).format("MMM DD, YYYY"))),n("br"),t._v("- "+t._s(t.$moment(e.period.to).format("MMM DD, YYYY")))]),t._v(" "),n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(e.promo))]),t._v(" "),n("td",{staticClass:"text-left",on:{click:function(n){t.showItem(e)}}},[t._v(t._s(e.desc))])])}))])]),t._v(" "),n("button",{staticClass:"primary circular absolute-bottom-right raised",staticStyle:{bottom:"2em",right:"2em"},on:{click:function(e){t.isNew=!0,t.$refs.newModal.open()}}},[n("i",[t._v("add")])]),t._v(" "),n("button",{staticClass:"primary circular absolute-bottom-right raised",staticStyle:{bottom:"2em",left:"22em","background-color":"green"},attrs:{id:"btnExport"},on:{click:function(e){t.fnExcelReport2()}}},[n("i",[t._v("save")]),t._v(" - "),n("i",[t._v("print")])]),t._v(" "),n("q-modal",{ref:"newModal",attrs:{noEscDismiss:!0,noBackdropDismiss:!0}},[n("div",{staticClass:"layout-padding"},[n("h4",[t._v(t._s(t.isNew?"Create Item":"Edit Item"))]),t._v(" "),n("form",[n("p",{staticClass:"caption"},[t._v("\n          Period\n        ")]),t._v(" "),n("q-datetime-range",{attrs:{type:"datetime"},model:{value:t.campaign.period,callback:function(e){t.$set(t.campaign,"period",e)},expression:"campaign.period"}}),t._v(" "),n("div",{staticClass:"floating-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.promo,expression:"campaign.promo"}],staticClass:"full-width",attrs:{required:""},domProps:{value:t.campaign.promo},on:{input:function(e){e.target.composing||t.$set(t.campaign,"promo",e.target.value)}}}),t._v(" "),n("label",[t._v("Promo")])]),t._v(" "),n("div",{staticClass:"floating-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.desc,expression:"campaign.desc"}],staticClass:"full-width",attrs:{required:""},domProps:{value:t.campaign.desc},on:{input:function(e){e.target.composing||t.$set(t.campaign,"desc",e.target.value)}}}),t._v(" "),n("label",[t._v("Description")])]),t._v(" "),t.isNew?n("q-uploader",{attrs:{"hide-upload-button":!0,url:"",extensions:"'.gif,.GIF,.jpg,.JPG,.jpeg,.JPEG,.png,.PNG'"},on:{add:t.photoAdded,remove:t.photoRemoved}}):t._e(),t._v(" "),""!==t.campaign.photo?n("img",{staticStyle:{"max-width":"auto","max-height":"500px"},attrs:{src:t.campaign.photo,alt:"image"}}):t._e()],1),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"row pull-right"},[n("button",{staticClass:"primary clear",on:{click:function(e){t.$refs.newModal.close()}}},[t._v("cancel")]),t._v(" "),t.isNew?n("button",{staticClass:"primary",attrs:{disabled:""===t.campaign.period.from||""===t.campaign.period.to||""===t.campaign.promo||""===t.campaign.desc||null===t.uploadedPhoto},on:{click:function(e){t.isNew=!1,t.saveNew()}}},[t._v("Save")]):n("button",{staticClass:"primary",attrs:{disabled:""===t.campaign.period.from||""===t.campaign.period.to||""===t.campaign.promo||""===t.campaign.desc||null===t.uploadedPhoto},on:{click:t.saveUpdate}},[t._v("Save")])]),t._v(" "),n("br")])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Period")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Promo")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Description")]),t._v(" "),n("th",{staticClass:"text-right"},[t._v("Action")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tfoot",[n("tr",[n("td",{staticClass:"text-right",attrs:{colspan:"7"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Period")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Promo")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("Description")])])])}]}}});